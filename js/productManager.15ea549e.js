(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["productManager"],{1287:function(t,e,s){},2532:function(t,e,s){"use strict";var a=s("23e7"),o=s("5a34"),r=s("1d80"),c=s("ab13");a({target:"String",proto:!0,forced:!c("includes")},{includes:function(t){return!!~String(r(this)).indexOf(o(t),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(t,e,s){var a=s("861d"),o=s("c6b6"),r=s("b622"),c=r("match");t.exports=function(t){var e;return a(t)&&(void 0!==(e=t[c])?!!e:"RegExp"==o(t))}},"46b3":function(t,e,s){"use strict";s("1287")},"4de4":function(t,e,s){"use strict";var a=s("23e7"),o=s("b727").filter,r=s("1dde"),c=s("ae40"),l=r("filter"),i=c("filter");a({target:"Array",proto:!0,forced:!l||!i},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},"5a34":function(t,e,s){var a=s("44e7");t.exports=function(t){if(a(t))throw TypeError("The method doesn't accept regular expressions");return t}},ab13:function(t,e,s){var a=s("b622"),o=a("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(s){try{return e[o]=!1,"/./"[t](e)}catch(a){}}return!1}},caad:function(t,e,s){"use strict";var a=s("23e7"),o=s("4d64").includes,r=s("44d2"),c=s("ae40"),l=c("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!l},{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),r("includes")},f7ab:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"productManager"}},[s("div",{staticClass:"title"},[t._v("產品管理")]),s("b-row",{staticClass:"mb-5"},[s("b-col",{attrs:{cols:"3"}},[s("b-form-select",{attrs:{options:t.categoryoptions},model:{value:t.categorySelect,callback:function(e){t.categorySelect=e},expression:"categorySelect"}})],1),s("b-col",{attrs:{cols:"3"}},[s("b-form-select",{attrs:{options:t.selloptions},model:{value:t.sellSelect,callback:function(e){t.sellSelect=e},expression:"sellSelect"}})],1),s("b-col",{staticClass:"text-right p-0",attrs:{cols:"6"}},[s("b-button",{staticClass:"addPro",attrs:{id:"show-btn"},on:{click:function(e){return t.showModel(!0)}}},[t._v("+ 新增商品")])],1)],1),s("b-modal",{ref:"my-modal",staticClass:"w-50",attrs:{id:"bv-modal-example",size:"lg","hide-header":"","hide-footer":""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}}),t.iscreate?s("div",{staticClass:"modelTitle"},[t._v("新增商品")]):s("div",{staticClass:"modelTitle"},[t._v("編輯商品")]),s("b-row",{staticClass:"w-90 m-auto form-group"},[this.iscreate?s("b-col",{staticClass:"d-flex justify-content-between mb-3",attrs:{cols:"12"}},[this.iscreate?s("img-inputer",{attrs:{placeholder:"請選擇圖片","bottom-text":"點擊或拖曳更換圖片","max-size":1024,exceedSizeText:"檔案大小不能超過",accept:"image/*"},model:{value:t.tempProduct.images,callback:function(e){t.$set(t.tempProduct,"images",e)},expression:"tempProduct.images"}}):t._e(),s("b-form-select",{staticClass:"w-25 py-0",attrs:{id:"categorySelect",options:t.options},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1):t._e(),s("b-col",{staticClass:"d-flex mt-2",attrs:{cols:"12"}},[s("b-row",[s("b-col",{staticClass:"d-flex justify-content-between",attrs:{cols:"12"}},[s("label",{attrs:{for:"name"}},[t._v("產品名稱"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.name,expression:"tempProduct.name"}],staticClass:"ml-3",attrs:{id:"name",type:"text",placeholder:"輸入"},domProps:{value:t.tempProduct.name},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"name",e.target.value)}}})]),t.iscreate?t._e():s("b-form-select",{staticClass:"w-25 py-0",attrs:{id:"categorySelect",options:t.options},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),s("b-col",{attrs:{cols:"12"}},[s("label",{attrs:{for:"price"}},[t._v("產品價錢"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.price,expression:"tempProduct.price"}],staticClass:"ml-3",attrs:{id:"price",type:"text",placeholder:"輸入"},domProps:{value:t.tempProduct.price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"price",e.target.value)}}})])])],1)],1),s("b-col",{staticClass:"d-flex mb-1",attrs:{cols:"12"}},[s("label",{staticClass:"mr-3",attrs:{for:"textarea"}},[t._v("產品描述")]),s("b-form-textarea",{staticClass:"w-75",attrs:{id:"textarea",placeholder:"輸入",rows:"1","max-rows":"6"},model:{value:t.tempProduct.description,callback:function(e){t.$set(t.tempProduct,"description",e)},expression:"tempProduct.description"}})],1),s("b-col",{staticClass:"d-flex my-1",attrs:{cols:"12"}},[s("label",{staticClass:"mr-3",attrs:{for:"ingredient"}},[t._v("產品材料")]),s("b-form-textarea",{staticClass:"w-75",attrs:{id:"ingredient",type:"ingredient",placeholder:"輸入"},model:{value:t.tempProduct.ingredient,callback:function(e){t.$set(t.tempProduct,"ingredient",e)},expression:"tempProduct.ingredient"}})],1),s("b-col",{staticClass:"mt-1",attrs:{cols:"12"}},[s("div",{staticClass:"b-row align-items-center"},[s("div",{staticClass:"b-col",attrs:{cols:"12"}},[s("label",{staticClass:"mr-3",attrs:{for:"allergy"}},[t._v("過敏材料")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.allergy,expression:"tempProduct.allergy"}],staticClass:"w-75",attrs:{id:"allergy",type:"allergy",placeholder:"輸入"},domProps:{value:t.tempProduct.allergy},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"allergy",e.target.value)}}})]),s("div",{staticClass:"b-col",attrs:{cols:"12"}},[s("label",{staticClass:"mr-3",attrs:{for:"period"}},[t._v("賞味天數")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.period,expression:"tempProduct.period"}],staticClass:"w-75",attrs:{id:"period",type:"period",placeholder:"輸入"},domProps:{value:t.tempProduct.period},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"period",e.target.value)}}})])])]),s("b-col",{staticClass:"mt-2 mb-4 d-flex",attrs:{id:"radio",cols:"12"}},[s("b-form-group",{staticClass:"mr-3",attrs:{label:"是否上架"}}),s("div",{staticClass:"d-flex flex-column justify-content-start"},[s("b-form-radio",{attrs:{value:"上架"},model:{value:t.tempProduct.sell,callback:function(e){t.$set(t.tempProduct,"sell",e)},expression:"tempProduct.sell"}},[t._v("上架")]),s("b-form-radio",{attrs:{value:"未上架"},model:{value:t.tempProduct.sell,callback:function(e){t.$set(t.tempProduct,"sell",e)},expression:"tempProduct.sell"}},[t._v("未上架")])],1)],1)],1),s("div",{staticClass:"d-flex justify-content-center mb-4",attrs:{id:"modal-footer"}},[this.iscreate?s("b-button",{staticClass:"confirmBtn mr-5",attrs:{id:"show-btn",variant:"success"},on:{click:t.create}},[t._v("新增")]):t._e(),this.iscreate?t._e():s("b-button",{staticClass:"confirmBtn mr-5",attrs:{id:"show-btn",variant:"success"},on:{click:t.edit}},[t._v("確認")]),s("b-button",{staticClass:"cancelBtn",attrs:{id:"show-btn",variant:"primary"},on:{click:t.closeModel}},[t._v("取消")])],1)],1),s("b-row",{staticClass:"firstcolborder"},[s("b-col",{staticClass:"d-flex justify-content-center",attrs:{cols:"6"}},[t._v("商品資訊")]),s("b-col",{staticClass:"d-flex justify-content-center",attrs:{cols:"3"}},[t._v("狀態")]),s("b-col",{staticClass:"d-flex justify-content-center",attrs:{cols:"2"}},[t._v("編輯")]),s("b-col",{staticClass:"d-flex justify-content-center",attrs:{cols:"1"}},[t._v("刪除")])],1),t._l(t.filterproducts,(function(e,a){return s("b-row",{key:e._id,staticClass:"colBorder"},[s("b-col",{staticClass:"d-flex justify-content-center",attrs:{cols:"3"}},[s("img",{staticClass:"img",attrs:{src:e.imageUrl}})]),s("b-col",{staticClass:"d-flex flexColumn",attrs:{cols:"3"}},[s("div",{staticClass:"proBig"},[t._v(t._s(e.name))]),s("div",{staticClass:"proSmall"},[t._v("NT$ "+t._s(e.price))])]),s("b-col",{staticClass:"d-flex justify-content-center",attrs:{cols:"3"}},[s("span",{staticClass:"sellColorNormal",class:{sellColor:"上架"===e.sell}},[t._v(t._s(e.sell))])]),s("b-col",{staticClass:"d-flex justify-content-center",attrs:{cols:"2"}},[s("b-btn",{staticClass:"editbtn",attrs:{variant:"success"},on:{click:function(s){return t.showModel(!1,e)}}},[s("font-awesome-icon",{attrs:{icon:["fas","edit"]}})],1)],1),s("b-col",{staticClass:"d-flex justify-content-center",attrs:{cols:"1"}},[s("b-btn",{staticClass:"delbtn",attrs:{variant:"danger"},on:{click:function(s){return t.delProduct(e,a)}}},[s("font-awesome-icon",{attrs:{icon:["fas","trash-alt"]}})],1)],1)],1)})),s("b-modal",{ref:"my-modal",attrs:{id:"confirmModel",size:"sm",centered:"","hide-header":"","hide-footer":""},model:{value:t.showConfirm,callback:function(e){t.showConfirm=e},expression:"showConfirm"}},[s("p",{staticClass:"text-center"},[t._v("確定要刪除此資料嗎?")]),s("div",{staticClass:"d-flex justify-content-center my-4",attrs:{id:"modal-footer"}},[s("b-button",{staticClass:"confirmBtn mr-5",attrs:{id:"show-btn",variant:"success"},on:{click:t.delConfirm}},[t._v("確認")]),s("b-button",{staticClass:"cancelBtn",attrs:{id:"show-btn",variant:"primary"},on:{click:t.closedelModel}},[t._v("取消")])],1)])],2)},o=[],r=(s("a4d3"),s("e01a"),s("99af"),s("4de4"),s("7db0"),s("caad"),s("a434"),s("b0c0"),s("2532"),s("b85c")),c={name:"productManager",data:function(){return{iscreate:!1,show:!1,showConfirm:!1,tempdelpro:{},products:[],tempProduct:{},tempIndex:0,selected:null,categorySelect:"所有類別",sellSelect:"全部",options:[{value:null,text:"選擇類別"},{value:"吐司類",text:"吐司類"},{value:"歐式麵包類",text:"歐式麵包類"},{value:"新品上市類",text:"新品上市類"},{value:"其他",text:"其他"}],categoryoptions:[{value:"所有類別",text:"所有類別"},{value:"吐司類",text:"吐司類"},{value:"歐式麵包類",text:"歐式麵包類"},{value:"新品上市類",text:"新品上市類"},{value:"其他",text:"其他"}],selloptions:[{value:"全部",text:"全部"},{value:"上架",text:"上架"},{value:"未上架",text:"未上架"}]}},mounted:function(){var t=this;this.axios.get("https://japanpan.herokuapp.com/products/").then((function(e){t.products=e.data.result;var s,a=Object(r["a"])(t.products);try{for(a.s();!(s=a.n()).done;){var o=s.value,c="".concat("https://japanpan.herokuapp.com","/products/images/").concat(o.images);o.imageUrl=c}}catch(l){a.e(l)}finally{a.f()}}))},methods:{create:function(){var t=this;if(this.tempProduct.category=this.selected,this.tempProduct.images.size>1048576)this.$swal({icon:"error",title:"錯誤",text:"圖片太大"});else if(this.tempProduct.images.type.includes("image")){var e=new FormData;e.append("name",this.tempProduct.name),e.append("price",this.tempProduct.price),e.append("sell",this.tempProduct.sell),e.append("description",this.tempProduct.description),e.append("ingredient",this.tempProduct.ingredient),e.append("allergy",this.tempProduct.allergy),e.append("period",this.tempProduct.period),e.append("category",this.selected),e.append("images",this.tempProduct.images),this.axios.post("https://japanpan.herokuapp.com/products/",e).then((function(e){e.data.success?(e.data.result.src="https://japanpan.herokuapp.com/products/images/"+e.data.result.images,t.show=!1,t.tempProduct.imageUrl=e.data.result.src,t.products.push(t.tempProduct),t.tempProduct={},t.selected=null):t.$swal({icon:"error",title:"錯誤",text:e.data.message})})).catch((function(e){t.$swal({icon:"error",title:"錯誤",text:e.response.data.message})}))}else this.$swal({icon:"error",title:"錯誤",text:"檔案格式錯誤"})},edit:function(){var t=this;this.tempProduct.category=this.selected,this.axios.patch("https://japanpan.herokuapp.com/products/"+this.tempProduct._id,this.tempProduct).then((function(e){if(e.data.success){var s=t.products.find((function(e){return e._id===t.tempProduct._id}));s.description=t.tempProduct.description,s.name=t.tempProduct.name,s.price=t.tempProduct.price,s.ingredient=t.tempProduct.ingredient,s.allergy=t.tempProduct.allergy,s.period=t.tempProduct.period,s.category=t.selected,t.$set(s,"sell",t.tempProduct.sell),t.show=!1,console.log(s)}else t.$swal({icon:"error",title:"錯誤",text:e.data.message})})).catch((function(e){t.$swal({icon:"error",title:"錯誤",text:e.response.data.message})}))},closedelModel:function(){this.showConfirm=!1},delConfirm:function(){var t=this;this.axios.delete("https://japanpan.herokuapp.com/products/"+this.tempdelpro._id).then((function(e){e.data.success?(t.products.splice(t.tempIndex,1),t.showConfirm=!1,t.tempdelpro={},t.tempIndex=0):t.$swal({icon:"error",title:"錯誤",text:e.data.message})})).catch((function(e){t.$swal({icon:"error",title:"錯誤",text:e.response.data.message})}))},delProduct:function(t,e){this.tempdelpro=t,this.tempIndex=e,this.showConfirm=!0},showModel:function(t,e){t?(this.tempProduct={},this.show=!0,this.iscreate=!0):(this.tempProduct=Object.assign({},e),this.selected=this.tempProduct.category,this.iscreate=!1,this.show=!0)},closeModel:function(){this.show=!1,this.tempProduct={},this.selected=null}},computed:{filterproducts:function(){var t=this;return this.products.filter((function(e){return"所有類別"===t.categorySelect&&"全部"===t.sellSelect?e:"所有類別"===t.categorySelect&&"全部"!==t.sellSelect?e.sell===t.sellSelect:"所有類別"!==t.categorySelect&&"全部"===t.sellSelect?e.category===t.categorySelect:e.category===t.categorySelect&&e.sell===t.sellSelect}))}}},l=c,i=(s("46b3"),s("2877")),n=Object(i["a"])(l,a,o,!1,null,"b4903ef4",null);e["default"]=n.exports}}]);
//# sourceMappingURL=productManager.15ea549e.js.map